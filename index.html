<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blogger</title>
    <!-- Font Awesome -->
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    rel="stylesheet"
    />
    <!-- Google Fonts --><link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    rel="stylesheet"
    />
    <!-- MDB -->
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css"
    rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>

    <div class="container">
        <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
          <a href="/" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">
          <h2 class="fst-italic">Blogger</h2>
          </a>
    
          <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
            <li><a href="#" class="nav-link px-2 link-secondary">Home</a></li>
            <li><a href="#" class="nav-link px-2 link-dark">Features</a></li>
            <li><a href="#" class="nav-link px-2 link-dark">Pricing</a></li>
            <li><a href="#" class="nav-link px-2 link-dark">FAQs</a></li>
            <li><a href="#" class="nav-link px-2 link-dark">About</a></li>
          </ul>
    
          <div class="col-md-3 text-end">
            <button type="button" class="btn btn-outline-primary me-2" onclick="openPopup()">Login</button>
          </div>
        </header>
      </div>
    
    <div class="container col-xl-10 col-xxl-8">
        <div class="row align-items-center g-lg-5 py-5">
          <div class="col-lg-7 text-center text-lg-start">
            <h1 class="display-4 fw-bold lh-1 mb-3 fst-italic">Be a Blogger!</h1>
            <p class="col-lg-10 fs-4">Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa repellat odio, officiis nulla sequi non modi libero quaerat eum excepturi.</p>
          </div>
          <div class="col-md-10 mx-auto col-lg-5">
            <!-- <form class="p-4 p-md-5 border rounded-3 bg-light"> -->
              <div class="form-floating mb-3">
                <input type="name" name="name" id="name" class="form-control" id="floatingInput" placeholder="John Doe">
                <label for="floatingInput">Full Name</label>
              </div>    
              <div class="form-floating mb-3">
                <input type="email" name="email" id="email" class="form-control" id="floatingInput" placeholder="name@example.com">
                <label for="floatingInput">Email address</label>
              </div>
              <div class="form-floating mb-3">
                <input type="password" name="password" id="password" class="form-control" id="floatingPassword" placeholder="Password">
                <label for="floatingPassword">Password</label>
              </div>
              <button onclick="callviaback()" class="w-100 btn btn-lg btn-primary">Sign up</button>
              <hr class="my-4">
              <a href="#">Already there! Sign in</a>
            <!-- </form> -->
          </div>
        </div>
      </div>
    
      <div id="popup1"  class="overlay">
        <div class="popup">
          <a class="close" onclick="closePopup()">&times;</a>
      <!-- Default form login -->
       <h3 class="text-center">Sign In</h3>
      <!-- <form class="p-3">  -->
        <div class="form-floating mb-3">
          <input type="email" name="email" id="emaillogin" class="form-control" id="floatingInput" placeholder="name@example.com">
          <label for="floatingInput">Email address</label>
        </div>
        <div class="form-floating mb-3">
          <input type="password" name="password" id="passwordlogin" class="form-control" id="floatingPassword" placeholder="Password">
          <label for="floatingPassword">Password</label>
        </div>      
        <!-- 2 column grid layout for inline styling -->
        <div class="row mb-4">
          <div class="col text-center">
            <!-- Simple link -->
            <a href="#!">Forgot password?</a>
          </div>
        </div>
      
        <!-- Submit button -->
        <button onclick="login()" class="btn btn-primary btn-block">Sign in</button>
      <!-- </form>    -->
         <!-- Default form login -->
        </div>
      </div>
      
    
    <script>

const login = ()=>{
                    var obj = {
        email:document.getElementById("emaillogin").value,
        password:document.getElementById("passwordlogin").value,
    }
    console.log(obj);
    fetch('http://localhost:3000/api/user/login',{
    method: 'POST', // or 'PUT'
    headers: {
      'Content-Type': 'application/json',
    },
    body:JSON.stringify(obj),
  })
  .then(response => response.json())
  .then(data =>{ 
    console.log(data);
    localStorage.setItem("auth_token", data.auth_token);
    window.location.href("components/blog.html")
});
}

const callviaback = ()=>{
        var obj = {
        name:document.getElementById("name").value,
        email:document.getElementById("email").value,
        password:document.getElementById("password").value,
    }
    console.log(obj);
    fetch('http://localhost:3000/api/user/register',{
      method: 'POST', // or 'PUT'
      headers: {
        'Content-Type': 'application/json',
      },
      body:JSON.stringify(obj),
    })
    .then(response => response.json())
    .then(data =>{ console.log(data)
    });
}


       
      function closePopup()
        {
            document.getElementById('popup1').style.display="none";
        }
       function openPopup()  {
            document.getElementById('popup1').style.display="block";
        }

    </script>  
    </body>
</html>